{"ast":null,"code":"var _jsxFileName = \"/Users/willhwang/go/src/github.com/will-slack/apiclient/client/src/components/Compose/index.js\";\nimport React, { useState, useRef, useContext, Component } from 'react';\nimport './Compose.css';\nimport Axios from 'axios';\nimport ChannelContext from '../../context/ChannelContext';\nimport AuthContext from '../../context/AuthContext'; // export default function Compose(props) {\n//     const authentication = useContext(AuthContext);\n//     const channel = useContext(ChannelContext)\n//     const textInput = useRef(null)\n//     function handleSubmit(e) {\n//       e.preventDefault();\n//       if (e.keyCode == 13) {\n//         Axios({\n//           method: 'POST', \n//           url: \"https://localhost:4000/v1/messages\",\n//           headers: {\n//               Authorization: authentication.auth.token\n//           },\n//           data: {\n//               channelId: channel.channel.id,\n//               body: textInput.current.value\n//           }\n//         }).then(result => {\n//             if (result.status == 200) {\n//               // window.location.reload(false);\n//               console.log(result)\n//             }\n//         }).catch(e => {\n//             console.log(e);\n//         })\n//         textInput.current.value = \"\"   \n//        } \n//     }\n//     return (\n//       <div className=\"compose\">\n//           <input\n//             type=\"text\"\n//             ref={textInput}\n//             className=\"compose-input\"\n//             placeholder=\"Type a message\"\n//             // onInput={e => setInput(e.target.value)}\n//             onKeyUp={e => handleSubmit(e)}\n//           />\n//       </div>\n//     );\n// }\n\nexport default class Compose extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const {\n        auth\n      } = this.context;\n\n      if (e.keyCode == 13) {\n        Axios({\n          method: 'POST',\n          url: \"https://localhost:4000/v1/messages\",\n          headers: {\n            Authorization: auth.token\n          },\n          data: {\n            channelId: channel.channel.id,\n            body: textInput.current.value\n          }\n        }).then(result => {\n          if (result.status == 200) {\n            // window.location.reload(false);\n            console.log(result);\n          }\n        }).catch(e => {\n          console.log(e);\n        });\n        textInput.current.value = \"\";\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"compose\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      ref: textInput,\n      className: \"compose-input\",\n      placeholder: \"Type a message\" // onInput={e => setInput(e.target.value)}\n      ,\n      onKeyUp: e => this.handleSubmit(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\nCompose.contextType = AuthContext;","map":{"version":3,"sources":["/Users/willhwang/go/src/github.com/will-slack/apiclient/client/src/components/Compose/index.js"],"names":["React","useState","useRef","useContext","Component","Axios","ChannelContext","AuthContext","Compose","handleSubmit","e","preventDefault","auth","context","keyCode","method","url","headers","Authorization","token","data","channelId","channel","id","body","textInput","current","value","then","result","status","console","log","catch","render","contextType"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,MAAzB,EAAiCC,UAAjC,EAA6CC,SAA7C,QAA6D,OAA7D;AACA,OAAO,eAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,WAAP,MAAwB,2BAAxB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,MAAMC,OAAN,SAAsBJ,SAAtB,CAAgC;AAAA;AAAA;;AAAA,SAE7CK,YAF6C,GAE7BC,CAAD,IAAO;AACpBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAM;AAACC,QAAAA;AAAD,UAAS,KAAKC,OAApB;;AACA,UAAIH,CAAC,CAACI,OAAF,IAAa,EAAjB,EAAqB;AACnBT,QAAAA,KAAK,CAAC;AACJU,UAAAA,MAAM,EAAE,MADJ;AAEJC,UAAAA,GAAG,EAAE,oCAFD;AAGJC,UAAAA,OAAO,EAAE;AACLC,YAAAA,aAAa,EAAEN,IAAI,CAACO;AADf,WAHL;AAMJC,UAAAA,IAAI,EAAE;AACFC,YAAAA,SAAS,EAAEC,OAAO,CAACA,OAAR,CAAgBC,EADzB;AAEFC,YAAAA,IAAI,EAAEC,SAAS,CAACC,OAAV,CAAkBC;AAFtB;AANF,SAAD,CAAL,CAUGC,IAVH,CAUQC,MAAM,IAAI;AACd,cAAIA,MAAM,CAACC,MAAP,IAAiB,GAArB,EAA0B;AACxB;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACD;AACJ,SAfD,EAeGI,KAfH,CAeSvB,CAAC,IAAI;AACVqB,UAAAA,OAAO,CAACC,GAAR,CAAYtB,CAAZ;AACH,SAjBD;AAkBAe,QAAAA,SAAS,CAACC,OAAV,CAAkBC,KAAlB,GAA0B,EAA1B;AACA;AACH,KA1B4C;AAAA;;AA2B7CO,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,GAAG,EAAET,SAFP;AAGE,MAAA,SAAS,EAAC,eAHZ;AAIE,MAAA,WAAW,EAAC,gBAJd,CAKE;AALF;AAME,MAAA,OAAO,EAAEf,CAAC,IAAI,KAAKD,YAAL,CAAkBC,CAAlB,CANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADF;AAYD;;AAxC4C;AAA1BF,O,CACZ2B,W,GAAc5B,W","sourcesContent":["import React, {useState, useRef, useContext, Component} from 'react';\nimport './Compose.css';\nimport Axios from 'axios';\nimport ChannelContext from '../../context/ChannelContext';\nimport AuthContext from '../../context/AuthContext';\n\n// export default function Compose(props) {\n//     const authentication = useContext(AuthContext);\n//     const channel = useContext(ChannelContext)\n//     const textInput = useRef(null)\n//     function handleSubmit(e) {\n//       e.preventDefault();\n//       if (e.keyCode == 13) {\n//         Axios({\n//           method: 'POST', \n//           url: \"https://localhost:4000/v1/messages\",\n//           headers: {\n//               Authorization: authentication.auth.token\n//           },\n//           data: {\n//               channelId: channel.channel.id,\n//               body: textInput.current.value\n//           }\n//         }).then(result => {\n//             if (result.status == 200) {\n//               // window.location.reload(false);\n//               console.log(result)\n//             }\n//         }).catch(e => {\n//             console.log(e);\n//         })\n//         textInput.current.value = \"\"   \n//        } \n//     }\n//     return (\n//       <div className=\"compose\">\n//           <input\n//             type=\"text\"\n//             ref={textInput}\n//             className=\"compose-input\"\n//             placeholder=\"Type a message\"\n//             // onInput={e => setInput(e.target.value)}\n//             onKeyUp={e => handleSubmit(e)}\n//           />\n//       </div>\n//     );\n// }\nexport default class Compose extends Component {\n  static contextType = AuthContext\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const {auth} = this.context\n    if (e.keyCode == 13) {\n      Axios({\n        method: 'POST', \n        url: \"https://localhost:4000/v1/messages\",\n        headers: {\n            Authorization: auth.token\n        },\n        data: {\n            channelId: channel.channel.id,\n            body: textInput.current.value\n        }\n      }).then(result => {\n          if (result.status == 200) {\n            // window.location.reload(false);\n            console.log(result)\n          }\n      }).catch(e => {\n          console.log(e);\n      })\n      textInput.current.value = \"\"   \n     } \n  }\n  render() {\n    return (\n      <div className=\"compose\">\n          <input\n            type=\"text\"\n            ref={textInput}\n            className=\"compose-input\"\n            placeholder=\"Type a message\"\n            // onInput={e => setInput(e.target.value)}\n            onKeyUp={e => this.handleSubmit(e)}\n          />\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}