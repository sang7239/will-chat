{"ast":null,"code":"var _jsxFileName = \"/Users/willhwang/go/src/github.com/will-slack/apiclient/client/src/components/ConversationListItem/index.js\";\nimport React, { useEffect, useContext, Component } from 'react';\nimport shave from 'shave';\nimport Compose from '../Compose';\nimport Toolbar from '../Toolbar';\nimport ToolbarButton from '../ToolbarButton';\nimport Message from '../Message';\nimport moment from 'moment';\nimport './ConversationListItem.css';\nimport ChannelContext from '../../context/ChannelContext';\nimport MessageList from '../MessageList';\nexport default class ConversationListItem extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getMessages = props => {\n      var tempMessages = [{\n        id: 1,\n        author: 'apple',\n        message: \"hi\",\n        timestamp: new Date().getTime()\n      }];\n      setMessages([...messages, ...tempMessages]);\n    };\n\n    this.renderMessages = () => {\n      const MY_USER_ID = 'apple';\n      let i = 0;\n      let messageCount = messages.length;\n      let tempMessages = [];\n\n      while (i < messageCount) {\n        let previous = messages[i - 1];\n        let current = messages[i];\n        let next = messages[i + 1];\n        let isMine = current.author === MY_USER_ID;\n        let currentMoment = moment(current.timestamp);\n        let prevBySameAuthor = false;\n        let nextBySameAuthor = false;\n        let startsSequence = true;\n        let endsSequence = true;\n        let showTimestamp = true;\n\n        if (previous) {\n          let previousMoment = moment(previous.timestamp);\n          let previousDuration = moment.duration(currentMoment.diff(previousMoment));\n          prevBySameAuthor = previous.author === current.author;\n\n          if (prevBySameAuthor && previousDuration.as('hours') < 1) {\n            startsSequence = false;\n          }\n\n          if (previousDuration.as('hours') < 1) {\n            showTimestamp = false;\n          }\n        }\n\n        if (next) {\n          let nextMoment = moment(next.timestamp);\n          let nextDuration = moment.duration(nextMoment.diff(currentMoment));\n          nextBySameAuthor = next.author === current.author;\n\n          if (nextBySameAuthor && nextDuration.as('hours') < 1) {\n            endsSequence = false;\n          }\n        }\n\n        tempMessages.push( /*#__PURE__*/React.createElement(Message, {\n          key: i,\n          isMine: isMine,\n          startsSequence: startsSequence,\n          endsSequence: endsSequence,\n          showTimestamp: showTimestamp,\n          data: current,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 9\n          }\n        })); // Proceed to the next message.\n\n        i += 1;\n      }\n\n      return tempMessages;\n    };\n  }\n\n  componentDidMount() {\n    const channel = this.context;\n  }\n\n  render() {\n    const {\n      channel,\n      setChannel\n    } = this.context;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"conversation-list-item\",\n      onClick: () => {},\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"conversation-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"conversation-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }, this.props.data.name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"conversation-snippet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, this.props.data.description))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Toolbar, {\n      title: \"Conversation Title\",\n      rightItems: [/*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"info\",\n        icon: \"ion-ios-information-circle-outline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"video\",\n        icon: \"ion-ios-videocam\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"phone\",\n        icon: \"ion-ios-call\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }\n      })],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-list-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }, renderMessages()), /*#__PURE__*/React.createElement(Compose, {\n      rightItems: [/*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"photo\",\n        icon: \"ion-ios-camera\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"image\",\n        icon: \"ion-ios-image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"audio\",\n        icon: \"ion-ios-mic\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"money\",\n        icon: \"ion-ios-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"games\",\n        icon: \"ion-logo-game-controller-b\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(ToolbarButton, {\n        key: \"emoji\",\n        icon: \"ion-ios-happy\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }\n      })],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\nConversationListItem.contextType = ChannelContext;","map":{"version":3,"sources":["/Users/willhwang/go/src/github.com/will-slack/apiclient/client/src/components/ConversationListItem/index.js"],"names":["React","useEffect","useContext","Component","shave","Compose","Toolbar","ToolbarButton","Message","moment","ChannelContext","MessageList","ConversationListItem","constructor","props","getMessages","tempMessages","id","author","message","timestamp","Date","getTime","setMessages","messages","renderMessages","MY_USER_ID","i","messageCount","length","previous","current","next","isMine","currentMoment","prevBySameAuthor","nextBySameAuthor","startsSequence","endsSequence","showTimestamp","previousMoment","previousDuration","duration","diff","as","nextMoment","nextDuration","push","componentDidMount","channel","context","render","setChannel","data","name","description","contextType"],"mappings":"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","sourcesContent":["import React, {useEffect, useContext, Component} from 'react';\nimport shave from 'shave';\nimport Compose from '../Compose';\nimport Toolbar from '../Toolbar';\nimport ToolbarButton from '../ToolbarButton';\nimport Message from '../Message';\nimport moment from 'moment';\nimport './ConversationListItem.css';\nimport ChannelContext from '../../context/ChannelContext'\nimport MessageList from '../MessageList';\n\nexport default class ConversationListItem extends Component {\n  static contextType = ChannelContext\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    const channel = this.context;\n  }\n  getMessages = (props) => {\n    var tempMessages = [\n      {\n        id: 1,\n        author: 'apple',\n        message: \"hi\",\n        timestamp: new Date().getTime()\n      },\n    ]\n    setMessages([...messages, ...tempMessages])\n  }\n  renderMessages = () => {\n    const MY_USER_ID = 'apple';\n\n    let i = 0;\n    let messageCount = messages.length;\n    let tempMessages = [];\n\n    while (i < messageCount) {\n      let previous = messages[i - 1];\n      let current = messages[i];\n      let next = messages[i + 1];\n      let isMine = current.author === MY_USER_ID;\n      let currentMoment = moment(current.timestamp);\n      let prevBySameAuthor = false;\n      let nextBySameAuthor = false;\n      let startsSequence = true;\n      let endsSequence = true;\n      let showTimestamp = true;\n\n      if (previous) {\n        let previousMoment = moment(previous.timestamp);\n        let previousDuration = moment.duration(currentMoment.diff(previousMoment));\n        prevBySameAuthor = previous.author === current.author;\n        \n        if (prevBySameAuthor && previousDuration.as('hours') < 1) {\n          startsSequence = false;\n        }\n\n        if (previousDuration.as('hours') < 1) {\n          showTimestamp = false;\n        }\n      }\n\n      if (next) {\n        let nextMoment = moment(next.timestamp);\n        let nextDuration = moment.duration(nextMoment.diff(currentMoment));\n        nextBySameAuthor = next.author === current.author;\n\n        if (nextBySameAuthor && nextDuration.as('hours') < 1) {\n          endsSequence = false;\n        }\n      }\n\n      tempMessages.push(\n        <Message\n          key={i}\n          isMine={isMine}\n          startsSequence={startsSequence}\n          endsSequence={endsSequence}\n          showTimestamp={showTimestamp}\n          data={current}\n        />\n      );\n\n      // Proceed to the next message.\n      i += 1;\n    }\n\n    return tempMessages;\n  }\n  render() {\n      const {channel, setChannel} = this.context\n      return (\n        <div>\n          <div className=\"conversation-list-item\" onClick={() => {\n              }}>\n            <div className=\"conversation-info\">\n              <h1 className=\"conversation-title\">{ this.props.data.name }</h1>\n              <p className=\"conversation-snippet\">{ this.props.data.description }</p>\n            </div>\n          </div>\n          <div className=\"message-list\">\n          <Toolbar\n            title=\"Conversation Title\"\n            rightItems={[\n              <ToolbarButton key=\"info\" icon=\"ion-ios-information-circle-outline\" />,\n              <ToolbarButton key=\"video\" icon=\"ion-ios-videocam\" />,\n              <ToolbarButton key=\"phone\" icon=\"ion-ios-call\" />\n            ]}\n          />\n\n          <div className=\"message-list-container\">{renderMessages()}</div>\n\n          <Compose rightItems={[\n            <ToolbarButton key=\"photo\" icon=\"ion-ios-camera\" />,\n            <ToolbarButton key=\"image\" icon=\"ion-ios-image\" />,\n            <ToolbarButton key=\"audio\" icon=\"ion-ios-mic\" />,\n            <ToolbarButton key=\"money\" icon=\"ion-ios-card\" />,\n            <ToolbarButton key=\"games\" icon=\"ion-logo-game-controller-b\" />,\n            <ToolbarButton key=\"emoji\" icon=\"ion-ios-happy\" />\n          ]}/>\n        </div>\n        </div>\n        \n      );\n  }\n}"]},"metadata":{},"sourceType":"module"}